<!DOCTYPE html>
<html lang="pt">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Cruzadinha</title>
  </head>
  <body>
    <input id="input_palavra" />
    <button onclick="exibe()">Exibir!</button> <br />

    <div id="cruzadinha_teste"></div>
  </body>
</html>
<script>
  var matriz2 = [
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, "r", "a", "m", 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, "c", 0, 0, "e", 0, 0, 0, 0, 0],
    [0,0,0,0,0,0,0,0,0,0,0,0,"e","p","r","o","m",0,0,0,0,0,],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, "d", 0, 0, "u", 0, 0, "o", 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, "a", 0, 0, 0, 0, 0, "r", 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, "t", 0, 0, 0, 0, 0, "i", "7", 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, "a", 0, 0, 0, 0, 0, "a", 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, "b", 0, 0, 0, 0, 0, "d", "m", "a", 0, 0, 0],
    [0,0,0,0,0,0,0,0,0,"q","u","a","d","c","o","r","e",0,0,0,0,0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, "s", 0, 0, 0, 0, 0, "m", 0, 0, 0, 0, 0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,"f","l","a","s","h",0,0,0,],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, "s", 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, "a", 0, "s", 0, 0, 0, 0, 0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,"d","u","a","l","c","o","r","e",],
    [0, 0, 0, 0, 0, 0, "5", 0, 0, 0, 0, 0, 0, 0, "r", 0, 0, 0, 0, 0, "o", 0],
    [0,0,0,"r","e","g","i","s","t","r","a","d","o","r","e","s",0,0,0,0,"m",0,],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, "s", 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, "c", "s", 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, "b", 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, "u", "l", "a", 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, "s", 0, 0, 0, 0, 0, 0, 0],
  ];

  var elementos = [[]];
  var tentativa = 0;
  var tentativa_id = 0;

  for (var i = 0; i < matriz2.length; i++) {
    elementos.push(new Array());
  }
  var cruzadinha = document.getElementById("cruzadinha_teste");
  for (var i = 0; i < matriz2.length; i++) {
    for (var c = 0; c < matriz2[i].length; c++) {
      var new_div = document.createElement("div");
      new_div.setAttribute("class", "square");
      if (matriz2[i][c] === 0 ) {
        new_div.classList.add("invisible");
      }
      new_div.innerHTML = matriz2[i][c];
      new_div.setAttribute("id", "lin" + i + "col" + c);

      elementos[i].push(new_div);
    }
    var linha = document.createElement("div");
    linha.setAttribute("class", "line");
    cruzadinha.appendChild(linha);
    elementos[i].forEach((element) => linha.appendChild(element));
  }
  for (var i = 0; i < elementos.length; i++) {
    for (var c = 0; c < elementos[i].length; c++) {
      document
        .getElementById(elementos[i][c].id)
        .addEventListener("click", function clicado(event) {
          event.target.classList.toggle("selected");
          tentativa = event.target.innerHTML;
          tentativa_id = event.target.id;
          console.log(tentativa);
          desmarcar(event.target.id);
        });
    }
  }
  function desmarcar(id) {
    var squares = document.getElementsByClassName("square");
    Array.from(squares).forEach((element) => {
      if (element.id != id) {
        element.classList.remove("selected");
      }
    });
  }

  function exibe() {
    var input_letra = document.getElementById("input_palavra").value;
    if (tentativa == 0){
        alert('Selecione um campo')
    }
    if (input_letra == tentativa) {
      document.getElementById(tentativa_id).classList.add("visible");
    }
    else{
        alert('Letra incorreta')
    }
  }
</script>
